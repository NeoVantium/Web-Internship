var wicker;var SeamlessBasket=function(){};(function(){"use strict";function IsJsonString(str){try{jQuery.parseJSON(str);}catch(e){return false;}
return true;}
SeamlessBasket.prototype.reload=function(){$(".bookingBasketWrap").fadeTo(200,0.6,function(){setTimeout(function(){wicker.make();},200);});};SeamlessBasket.prototype.makeInline=function(){$.ajax({type:"POST",cache:false,url:'app/ajax/basket',data:'mode=inline'}).done(function(data){if(IsJsonString(data)){var obj=jQuery.parseJSON(data);$(".bookingBasketWrap").html(obj.results);wicker.register_actions();}else{console.log(data);}});};SeamlessBasket.prototype.make=function(){$.ajax({type:"POST",cache:false,url:'app/ajax/basket',data:''}).done(function(data){if(IsJsonString(data)){var obj=jQuery.parseJSON(data);$(".bookingBasketWrap").html(obj.results);if(obj.redirect!==''){window.location=obj.redirect;}
if(obj.emptyBasket){$(".step1Booking").hide();}else{$(".step1Booking").fadeIn(300);}
$(".bookingBasketWrap").fadeTo(200,1);wicker.register_actions();}else{console.log(data);}});};SeamlessBasket.prototype.alert=function(type,text,sticky){$(".alert-bar").remove();var stickyContent='';if(sticky==="yes"){stickyContent='<button type="button" class="close" data-dismiss="alert">Ã—</button>';}
switch(type){case "red":$("body").prepend('<div class="alert-bar peek"><div class="alert alert-danger alert-info" role="alert">'+stickyContent+text+'</div></div>');setTimeout(function(){$(".alert-bar").removeClass("peek");if(sticky!=="yes"){wicker.closeAlert(10000);}},300);break;case "blue":$("body").prepend('<div class="alert-bar peek"><div class="alert alert-info" role="alert">'+stickyContent+text+'</div></div>');setTimeout(function(){$(".alert-bar").removeClass("peek");if(sticky!=="yes"){wicker.closeAlert(6000);}},300);break;case "green":$("body").prepend('<div class="alert-bar peek"><div class="alert alert-success" role="alert">'+stickyContent+text+'</div></div>');setTimeout(function(){$(".alert-bar").removeClass("peek");if(sticky!=="yes"){wicker.closeAlert(6000);}},300);break;case "yellow":$("body").prepend('<div class="alert-bar peek"><div class="alert alert-warning" role="alert">'+stickyContent+text+'</div></div>');setTimeout(function(){$(".alert-bar").removeClass("peek");if(sticky!=="yes"){wicker.closeAlert(6000);}},300);break;}
return true;};SeamlessBasket.prototype.closeAlert=function(time){setTimeout(function(){$(".alert-bar").addClass("peek");},time);};SeamlessBasket.prototype.addLoad=function(){$(".bookingBasketWrap").html('<div class="inner_loadingOverlay"><div class="loadingIcon"><img class="spin" src="interface/assets/images/load.gif" width="50" height="50" /></div></div>');};SeamlessBasket.prototype.register_actions=function(){$(".basket_next_step").unbind('click').click(function(){if($("#gift_wrap_set").val()==="set"){window.location="https://www.scentsamples.uk.com/checkout-signin";}else{window.location="https://www.scentsamples.uk.com/checkout-signin";}});$("a[rel^='prettyPhoto']").prettyPhoto();$('.tipme').tooltip();$(".remove_code").unbind('click').click(function(){$.ajax({cache:false,async:true,type:'POST',url:'app/ajax/wte.php',data:"&remove_code=yes",success:function(data){console.log(data);wicker.alert("green","<strong>Code has been removed</strong>");wicker.reload();}});});$(".remove_gift_wrapping").unbind('click').click(function(){$.ajax({cache:false,async:true,type:'POST',url:'app/ajax/wte.php',data:"&remove_gift_wrapping=yes",success:function(data){console.log(data);wicker.alert("green","<strong>Gift wrapping has been removed</strong>");wicker.reload();}});});$(".apply_gift_wrapping").unbind('click').click(function(){$.ajax({cache:false,async:true,type:'POST',url:'app/ajax/wte.php',data:"&add_gift_wrapping=1",success:function(data){console.log(data);wicker.alert("green","<strong>Gift wrapping has been added to your order</strong>");wicker.reload();}});});$(".apply_discount").unbind('click').click(function(){$.ajax({cache:false,async:true,type:'POST',url:'app/ajax/wte.php',data:$("#discount_form").serialize(),success:function(data){console.log(data);wicker.reload();}});});$(".qnty").unbind('keyup').keyup(function(){console.log("shoiwupdarelini");$(this).parent(".prdqunty").children(".updateLink").removeClass("hidden");$(this).parent(".prdqunty").children(".removeItem").addClass("hidden");});$(".changeQuantity").unbind('click').click(function(){var id=$(this).data("item");$(".basketItem[data-item='"+id+"'] .displayQuant").hide();$(".basketItem[data-item='"+id+"'] .changeQuant").show();});$(".updateLink").unbind('click').click(function(){var id=$(this).data("item");var q=$(".qnty[data-item='"+id+"']").val();var data_sent="q="+q+"&m=update&i="+id;$.ajax({type:"POST",url:"app/ajax/wte.php",data:data_sent,async:false,success:function(e){wicker.reload();}});});$(".removeItem").click(function(){var id=$(this).attr("data-item");$.ajax({cache:false,async:true,type:'POST',url:'app/ajax/wte.php',data:"i="+id+"&m=delete",success:function(data){console.log(data);wicker.reload();}});});};})();$(document).ready(function(){"use strict";wicker=new SeamlessBasket();});